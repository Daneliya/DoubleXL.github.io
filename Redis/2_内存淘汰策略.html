<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>内存淘汰策略 | xiaolong</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo2.png">
    <script type="text/javascript" src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="/js/visitor.js"></script>
    <link rel="stylesheet" href="/iconfont/font_20csbaofexh/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_cs5v8kb16mu/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_rb2ra212g7/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_tufiudzw9qd/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_a7q92la1f6s/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_zre4efrva2s/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_qw4wryn6ml/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_871awunxhy/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_y9b41xpetef/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_mo5yyv3yprm/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_zmhzcngpk2/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_j67xetcspme/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_2tttlrelpoh/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_c103gbzvyng/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_iju5isejpxc/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_3nnhx9n8ea/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_6oyf4j0cvmu/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_tmecser0ml/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_o3x7o929hi/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_qpo7ov9uo7e/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_o6ur3qwvq4k/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_530mtleffzr/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_9ggbupsr8d/iconfont.css">
    <link rel="stylesheet" href="/iconfont/font_lystyiufdck/iconfont.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js">
    <meta name="description" content="描述">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.3253b276.css" as="style"><link rel="preload" href="/assets/js/app.72c8e072.js" as="script"><link rel="preload" href="/assets/js/17.ab8859c1.js" as="script"><link rel="preload" href="/assets/js/1.e5894fc2.js" as="script"><link rel="preload" href="/assets/js/57.5ffd788b.js" as="script"><link rel="preload" href="/assets/js/85.1658c68d.js" as="script"><link rel="prefetch" href="/assets/js/10.4dcdfd7c.js"><link rel="prefetch" href="/assets/js/100.e81efca8.js"><link rel="prefetch" href="/assets/js/101.8fede505.js"><link rel="prefetch" href="/assets/js/102.ca31a1c9.js"><link rel="prefetch" href="/assets/js/103.a8e1ccd1.js"><link rel="prefetch" href="/assets/js/104.db15210a.js"><link rel="prefetch" href="/assets/js/105.e9a2f695.js"><link rel="prefetch" href="/assets/js/106.a3555639.js"><link rel="prefetch" href="/assets/js/107.c4e20393.js"><link rel="prefetch" href="/assets/js/108.326d531e.js"><link rel="prefetch" href="/assets/js/109.5dad0983.js"><link rel="prefetch" href="/assets/js/11.5f0614c6.js"><link rel="prefetch" href="/assets/js/110.c66ba5e9.js"><link rel="prefetch" href="/assets/js/111.523862a1.js"><link rel="prefetch" href="/assets/js/112.01ab1b32.js"><link rel="prefetch" href="/assets/js/113.4995a47b.js"><link rel="prefetch" href="/assets/js/114.88a9a1cf.js"><link rel="prefetch" href="/assets/js/115.c987536c.js"><link rel="prefetch" href="/assets/js/116.d0102ab7.js"><link rel="prefetch" href="/assets/js/117.c0afc100.js"><link rel="prefetch" href="/assets/js/118.5ce05077.js"><link rel="prefetch" href="/assets/js/119.25595692.js"><link rel="prefetch" href="/assets/js/12.f3c982ae.js"><link rel="prefetch" href="/assets/js/120.365f4f3f.js"><link rel="prefetch" href="/assets/js/121.465198d7.js"><link rel="prefetch" href="/assets/js/122.ce13b35c.js"><link rel="prefetch" href="/assets/js/123.e8870952.js"><link rel="prefetch" href="/assets/js/124.c7e5f326.js"><link rel="prefetch" href="/assets/js/125.ccfa51b6.js"><link rel="prefetch" href="/assets/js/126.4ed926bc.js"><link rel="prefetch" href="/assets/js/127.462919df.js"><link rel="prefetch" href="/assets/js/128.c25a6129.js"><link rel="prefetch" href="/assets/js/129.e8f59064.js"><link rel="prefetch" href="/assets/js/13.4e4c6572.js"><link rel="prefetch" href="/assets/js/130.c7f8e22c.js"><link rel="prefetch" href="/assets/js/131.f8793f08.js"><link rel="prefetch" href="/assets/js/132.db37b294.js"><link rel="prefetch" href="/assets/js/133.dbb719e4.js"><link rel="prefetch" href="/assets/js/134.7718c088.js"><link rel="prefetch" href="/assets/js/135.dbdcb6a7.js"><link rel="prefetch" href="/assets/js/136.05f55ab5.js"><link rel="prefetch" href="/assets/js/137.6a1f40e0.js"><link rel="prefetch" href="/assets/js/138.c8a3fa0a.js"><link rel="prefetch" href="/assets/js/139.0ab7ec2f.js"><link rel="prefetch" href="/assets/js/14.0fa5eb12.js"><link rel="prefetch" href="/assets/js/140.5d09b469.js"><link rel="prefetch" href="/assets/js/141.51cf3377.js"><link rel="prefetch" href="/assets/js/142.556aa0a4.js"><link rel="prefetch" href="/assets/js/143.7bb81862.js"><link rel="prefetch" href="/assets/js/144.91b2c595.js"><link rel="prefetch" href="/assets/js/145.2f6545fb.js"><link rel="prefetch" href="/assets/js/146.1db9b3ac.js"><link rel="prefetch" href="/assets/js/147.c47e021f.js"><link rel="prefetch" href="/assets/js/148.dfcaddca.js"><link rel="prefetch" href="/assets/js/149.f44495b4.js"><link rel="prefetch" href="/assets/js/15.ced80d90.js"><link rel="prefetch" href="/assets/js/150.c49a010a.js"><link rel="prefetch" href="/assets/js/151.8cc891dc.js"><link rel="prefetch" href="/assets/js/152.810a5dac.js"><link rel="prefetch" href="/assets/js/153.77b100c8.js"><link rel="prefetch" href="/assets/js/154.1d44b0d0.js"><link rel="prefetch" href="/assets/js/155.c16dba0d.js"><link rel="prefetch" href="/assets/js/156.a943f7a6.js"><link rel="prefetch" href="/assets/js/157.898cd9aa.js"><link rel="prefetch" href="/assets/js/158.b3db24a1.js"><link rel="prefetch" href="/assets/js/159.38157b38.js"><link rel="prefetch" href="/assets/js/16.b54885a8.js"><link rel="prefetch" href="/assets/js/160.9fca1cab.js"><link rel="prefetch" href="/assets/js/161.0afd8b7b.js"><link rel="prefetch" href="/assets/js/162.039aa977.js"><link rel="prefetch" href="/assets/js/163.66984c37.js"><link rel="prefetch" href="/assets/js/164.5af0a82f.js"><link rel="prefetch" href="/assets/js/165.e55558a0.js"><link rel="prefetch" href="/assets/js/166.4ed1987e.js"><link rel="prefetch" href="/assets/js/167.40bf7218.js"><link rel="prefetch" href="/assets/js/168.2de88244.js"><link rel="prefetch" href="/assets/js/169.2b003608.js"><link rel="prefetch" href="/assets/js/170.d41df6c3.js"><link rel="prefetch" href="/assets/js/171.17e43e62.js"><link rel="prefetch" href="/assets/js/172.1cd07c3e.js"><link rel="prefetch" href="/assets/js/173.f0b40d73.js"><link rel="prefetch" href="/assets/js/174.9b4c9e54.js"><link rel="prefetch" href="/assets/js/175.f165610e.js"><link rel="prefetch" href="/assets/js/176.f3efa8ef.js"><link rel="prefetch" href="/assets/js/177.228408c8.js"><link rel="prefetch" href="/assets/js/178.d24f12bf.js"><link rel="prefetch" href="/assets/js/179.85df253c.js"><link rel="prefetch" href="/assets/js/18.c9e8c66c.js"><link rel="prefetch" href="/assets/js/180.1fe79169.js"><link rel="prefetch" href="/assets/js/181.9a0af401.js"><link rel="prefetch" href="/assets/js/182.9f336635.js"><link rel="prefetch" href="/assets/js/183.6720b8ff.js"><link rel="prefetch" href="/assets/js/184.4b26f2b2.js"><link rel="prefetch" href="/assets/js/185.e2d8cbee.js"><link rel="prefetch" href="/assets/js/186.1fbee82a.js"><link rel="prefetch" href="/assets/js/187.db00e8d0.js"><link rel="prefetch" href="/assets/js/188.da3d05b4.js"><link rel="prefetch" href="/assets/js/189.1732df63.js"><link rel="prefetch" href="/assets/js/19.0346ad2e.js"><link rel="prefetch" href="/assets/js/190.166ae2aa.js"><link rel="prefetch" href="/assets/js/191.7d60c9a2.js"><link rel="prefetch" href="/assets/js/192.d3ae18fd.js"><link rel="prefetch" href="/assets/js/193.8cce8272.js"><link rel="prefetch" href="/assets/js/194.be4beebd.js"><link rel="prefetch" href="/assets/js/195.08b2739e.js"><link rel="prefetch" href="/assets/js/196.09a0562d.js"><link rel="prefetch" href="/assets/js/197.41cb1779.js"><link rel="prefetch" href="/assets/js/198.8ff505df.js"><link rel="prefetch" href="/assets/js/199.e466aaf2.js"><link rel="prefetch" href="/assets/js/20.3bccb438.js"><link rel="prefetch" href="/assets/js/200.db8e3c07.js"><link rel="prefetch" href="/assets/js/201.c7615335.js"><link rel="prefetch" href="/assets/js/202.591783c0.js"><link rel="prefetch" href="/assets/js/203.0aa23344.js"><link rel="prefetch" href="/assets/js/204.9d53a760.js"><link rel="prefetch" href="/assets/js/205.290fb2c0.js"><link rel="prefetch" href="/assets/js/206.828e2e08.js"><link rel="prefetch" href="/assets/js/207.eafb90d1.js"><link rel="prefetch" href="/assets/js/208.d6992aaf.js"><link rel="prefetch" href="/assets/js/209.05a35ac1.js"><link rel="prefetch" href="/assets/js/21.f4aeeb8c.js"><link rel="prefetch" href="/assets/js/210.e053cf4c.js"><link rel="prefetch" href="/assets/js/211.15349d3d.js"><link rel="prefetch" href="/assets/js/212.9b9ce2d3.js"><link rel="prefetch" href="/assets/js/213.89f0956b.js"><link rel="prefetch" href="/assets/js/214.fe480727.js"><link rel="prefetch" href="/assets/js/215.a36d909e.js"><link rel="prefetch" href="/assets/js/216.1dbd832b.js"><link rel="prefetch" href="/assets/js/217.48d93c91.js"><link rel="prefetch" href="/assets/js/218.037fa608.js"><link rel="prefetch" href="/assets/js/219.b84b2cd9.js"><link rel="prefetch" href="/assets/js/22.c120a95f.js"><link rel="prefetch" href="/assets/js/220.ce2bd9d1.js"><link rel="prefetch" href="/assets/js/221.889cd742.js"><link rel="prefetch" href="/assets/js/222.7b7d19cc.js"><link rel="prefetch" href="/assets/js/223.c2d5b3fc.js"><link rel="prefetch" href="/assets/js/224.84979855.js"><link rel="prefetch" href="/assets/js/225.dde31138.js"><link rel="prefetch" href="/assets/js/226.7fc9a658.js"><link rel="prefetch" href="/assets/js/227.8621c6ec.js"><link rel="prefetch" href="/assets/js/228.5c23495c.js"><link rel="prefetch" href="/assets/js/229.b26d0ff2.js"><link rel="prefetch" href="/assets/js/23.cddd8373.js"><link rel="prefetch" href="/assets/js/230.b4913c97.js"><link rel="prefetch" href="/assets/js/231.7a979654.js"><link rel="prefetch" href="/assets/js/232.66332a31.js"><link rel="prefetch" href="/assets/js/233.0685dfc0.js"><link rel="prefetch" href="/assets/js/234.26816d9e.js"><link rel="prefetch" href="/assets/js/235.f90a2213.js"><link rel="prefetch" href="/assets/js/236.5d41fcb6.js"><link rel="prefetch" href="/assets/js/237.a24291f3.js"><link rel="prefetch" href="/assets/js/238.296c3f27.js"><link rel="prefetch" href="/assets/js/239.5fdb1e3a.js"><link rel="prefetch" href="/assets/js/24.c0131aad.js"><link rel="prefetch" href="/assets/js/240.27a4bff8.js"><link rel="prefetch" href="/assets/js/241.1070a607.js"><link rel="prefetch" href="/assets/js/242.299068ab.js"><link rel="prefetch" href="/assets/js/243.04497a4a.js"><link rel="prefetch" href="/assets/js/244.c674927b.js"><link rel="prefetch" href="/assets/js/245.0e1c67bd.js"><link rel="prefetch" href="/assets/js/246.57e08aa5.js"><link rel="prefetch" href="/assets/js/247.b4eee737.js"><link rel="prefetch" href="/assets/js/248.1f4c10e4.js"><link rel="prefetch" href="/assets/js/249.7e98d222.js"><link rel="prefetch" href="/assets/js/25.4351dbfb.js"><link rel="prefetch" href="/assets/js/250.bf9b0858.js"><link rel="prefetch" href="/assets/js/251.eef05b46.js"><link rel="prefetch" href="/assets/js/252.8547818c.js"><link rel="prefetch" href="/assets/js/253.9db2cd3c.js"><link rel="prefetch" href="/assets/js/254.349dee5c.js"><link rel="prefetch" href="/assets/js/255.0e92a839.js"><link rel="prefetch" href="/assets/js/256.2b502996.js"><link rel="prefetch" href="/assets/js/257.01cca01f.js"><link rel="prefetch" href="/assets/js/258.884a5d4f.js"><link rel="prefetch" href="/assets/js/259.eae39e3c.js"><link rel="prefetch" href="/assets/js/26.98d2137f.js"><link rel="prefetch" href="/assets/js/260.faad35ce.js"><link rel="prefetch" href="/assets/js/261.e3de840e.js"><link rel="prefetch" href="/assets/js/262.d8c9b2f5.js"><link rel="prefetch" href="/assets/js/263.1e7b4b45.js"><link rel="prefetch" href="/assets/js/264.0e920495.js"><link rel="prefetch" href="/assets/js/265.26d71248.js"><link rel="prefetch" href="/assets/js/266.731a804d.js"><link rel="prefetch" href="/assets/js/267.34e92f65.js"><link rel="prefetch" href="/assets/js/268.0deab07a.js"><link rel="prefetch" href="/assets/js/269.84365d9a.js"><link rel="prefetch" href="/assets/js/27.a3c92954.js"><link rel="prefetch" href="/assets/js/270.9e5f6855.js"><link rel="prefetch" href="/assets/js/271.dd9e8cf0.js"><link rel="prefetch" href="/assets/js/272.f0c563df.js"><link rel="prefetch" href="/assets/js/273.ef599720.js"><link rel="prefetch" href="/assets/js/274.868d43ac.js"><link rel="prefetch" href="/assets/js/275.dd0de8bd.js"><link rel="prefetch" href="/assets/js/276.ebfe7b3a.js"><link rel="prefetch" href="/assets/js/277.a2ec7a78.js"><link rel="prefetch" href="/assets/js/278.73ea1280.js"><link rel="prefetch" href="/assets/js/279.47300852.js"><link rel="prefetch" href="/assets/js/28.eff26f45.js"><link rel="prefetch" href="/assets/js/280.8c79a0ec.js"><link rel="prefetch" href="/assets/js/281.e0805fe5.js"><link rel="prefetch" href="/assets/js/282.2454abf5.js"><link rel="prefetch" href="/assets/js/283.9cb653eb.js"><link rel="prefetch" href="/assets/js/284.4b87623d.js"><link rel="prefetch" href="/assets/js/285.314d61ed.js"><link rel="prefetch" href="/assets/js/286.a10a1363.js"><link rel="prefetch" href="/assets/js/287.3df5d431.js"><link rel="prefetch" href="/assets/js/288.f781474d.js"><link rel="prefetch" href="/assets/js/289.ed30ace8.js"><link rel="prefetch" href="/assets/js/29.82abbd1d.js"><link rel="prefetch" href="/assets/js/290.a732ae75.js"><link rel="prefetch" href="/assets/js/291.9b00abf2.js"><link rel="prefetch" href="/assets/js/292.96fab610.js"><link rel="prefetch" href="/assets/js/293.4cc788e4.js"><link rel="prefetch" href="/assets/js/294.00723ece.js"><link rel="prefetch" href="/assets/js/295.9bdfb74a.js"><link rel="prefetch" href="/assets/js/296.94a89f3d.js"><link rel="prefetch" href="/assets/js/297.594f6a01.js"><link rel="prefetch" href="/assets/js/298.236a373e.js"><link rel="prefetch" href="/assets/js/299.d341e6a3.js"><link rel="prefetch" href="/assets/js/3.ce4d6dba.js"><link rel="prefetch" href="/assets/js/30.769d4b3b.js"><link rel="prefetch" href="/assets/js/300.b6fe37b4.js"><link rel="prefetch" href="/assets/js/301.9bfa4371.js"><link rel="prefetch" href="/assets/js/302.a8b5abde.js"><link rel="prefetch" href="/assets/js/303.a1878917.js"><link rel="prefetch" href="/assets/js/304.3d482a24.js"><link rel="prefetch" href="/assets/js/305.b874cfb7.js"><link rel="prefetch" href="/assets/js/306.155a15f1.js"><link rel="prefetch" href="/assets/js/307.f6b1d1c7.js"><link rel="prefetch" href="/assets/js/308.589d6ab2.js"><link rel="prefetch" href="/assets/js/309.546e9809.js"><link rel="prefetch" href="/assets/js/31.e3f8f951.js"><link rel="prefetch" href="/assets/js/310.afa0ec25.js"><link rel="prefetch" href="/assets/js/311.0a3ed8d8.js"><link rel="prefetch" href="/assets/js/312.7784612d.js"><link rel="prefetch" href="/assets/js/313.1ab57a51.js"><link rel="prefetch" href="/assets/js/314.8dc9a8db.js"><link rel="prefetch" href="/assets/js/315.5429b394.js"><link rel="prefetch" href="/assets/js/316.6edeb0d7.js"><link rel="prefetch" href="/assets/js/317.7aa3d30a.js"><link rel="prefetch" href="/assets/js/318.bb8e8a71.js"><link rel="prefetch" href="/assets/js/319.75dc6e2b.js"><link rel="prefetch" href="/assets/js/32.894e50b4.js"><link rel="prefetch" href="/assets/js/320.0ebd4a52.js"><link rel="prefetch" href="/assets/js/321.a68410e5.js"><link rel="prefetch" href="/assets/js/322.e1749632.js"><link rel="prefetch" href="/assets/js/323.8605a94e.js"><link rel="prefetch" href="/assets/js/324.44edbf08.js"><link rel="prefetch" href="/assets/js/325.082180ae.js"><link rel="prefetch" href="/assets/js/326.df26e030.js"><link rel="prefetch" href="/assets/js/327.82fa4f2d.js"><link rel="prefetch" href="/assets/js/328.48ce0dcc.js"><link rel="prefetch" href="/assets/js/329.824c0921.js"><link rel="prefetch" href="/assets/js/33.dc74fb8f.js"><link rel="prefetch" href="/assets/js/330.569d84f5.js"><link rel="prefetch" href="/assets/js/331.7a84828f.js"><link rel="prefetch" href="/assets/js/332.98a3f862.js"><link rel="prefetch" href="/assets/js/333.fe1f2447.js"><link rel="prefetch" href="/assets/js/334.584ab8f0.js"><link rel="prefetch" href="/assets/js/34.6659bc28.js"><link rel="prefetch" href="/assets/js/35.315ec680.js"><link rel="prefetch" href="/assets/js/36.cd87dee3.js"><link rel="prefetch" href="/assets/js/37.23faf65c.js"><link rel="prefetch" href="/assets/js/38.33227157.js"><link rel="prefetch" href="/assets/js/39.35520ee8.js"><link rel="prefetch" href="/assets/js/4.581fcbe8.js"><link rel="prefetch" href="/assets/js/40.6fd3d147.js"><link rel="prefetch" href="/assets/js/41.ccd103d8.js"><link rel="prefetch" href="/assets/js/42.0d7c5702.js"><link rel="prefetch" href="/assets/js/43.8c06e37c.js"><link rel="prefetch" href="/assets/js/44.0377891a.js"><link rel="prefetch" href="/assets/js/45.ebdf6e0d.js"><link rel="prefetch" href="/assets/js/46.5f7960a6.js"><link rel="prefetch" href="/assets/js/47.0fec2179.js"><link rel="prefetch" href="/assets/js/48.4cfe5fe9.js"><link rel="prefetch" href="/assets/js/49.fdee8a3e.js"><link rel="prefetch" href="/assets/js/5.b12c43b3.js"><link rel="prefetch" href="/assets/js/50.1a45d24a.js"><link rel="prefetch" href="/assets/js/51.f14888eb.js"><link rel="prefetch" href="/assets/js/52.b05cf40d.js"><link rel="prefetch" href="/assets/js/53.251e0712.js"><link rel="prefetch" href="/assets/js/54.aff5d523.js"><link rel="prefetch" href="/assets/js/55.9f7bd3a9.js"><link rel="prefetch" href="/assets/js/56.b26da8bc.js"><link rel="prefetch" href="/assets/js/58.7dc8ae26.js"><link rel="prefetch" href="/assets/js/59.2dfd7114.js"><link rel="prefetch" href="/assets/js/6.fe5805fe.js"><link rel="prefetch" href="/assets/js/60.f78e8217.js"><link rel="prefetch" href="/assets/js/61.b969ace0.js"><link rel="prefetch" href="/assets/js/62.57db2763.js"><link rel="prefetch" href="/assets/js/63.2ee27e80.js"><link rel="prefetch" href="/assets/js/64.7bbeb4ef.js"><link rel="prefetch" href="/assets/js/65.abd5dc9c.js"><link rel="prefetch" href="/assets/js/66.1c423298.js"><link rel="prefetch" href="/assets/js/67.f06fbbbb.js"><link rel="prefetch" href="/assets/js/68.d217abc0.js"><link rel="prefetch" href="/assets/js/69.70cf59f2.js"><link rel="prefetch" href="/assets/js/7.c3df4dcb.js"><link rel="prefetch" href="/assets/js/70.25351e10.js"><link rel="prefetch" href="/assets/js/71.103f55d1.js"><link rel="prefetch" href="/assets/js/72.a7222537.js"><link rel="prefetch" href="/assets/js/73.952c3e2f.js"><link rel="prefetch" href="/assets/js/74.dbb7eeb8.js"><link rel="prefetch" href="/assets/js/75.6a2ff8d8.js"><link rel="prefetch" href="/assets/js/76.e2882639.js"><link rel="prefetch" href="/assets/js/77.3073fabc.js"><link rel="prefetch" href="/assets/js/78.16976d68.js"><link rel="prefetch" href="/assets/js/79.736a991a.js"><link rel="prefetch" href="/assets/js/8.e534ee63.js"><link rel="prefetch" href="/assets/js/80.1bbd5ec0.js"><link rel="prefetch" href="/assets/js/81.4d91b6be.js"><link rel="prefetch" href="/assets/js/82.41508e46.js"><link rel="prefetch" href="/assets/js/83.3b80a777.js"><link rel="prefetch" href="/assets/js/84.d2a924f4.js"><link rel="prefetch" href="/assets/js/86.1832d66b.js"><link rel="prefetch" href="/assets/js/87.2f1f22dd.js"><link rel="prefetch" href="/assets/js/88.9da3f7c4.js"><link rel="prefetch" href="/assets/js/89.a3b6de84.js"><link rel="prefetch" href="/assets/js/9.e1183901.js"><link rel="prefetch" href="/assets/js/90.570d3cb3.js"><link rel="prefetch" href="/assets/js/91.d59b364d.js"><link rel="prefetch" href="/assets/js/92.56d8ede9.js"><link rel="prefetch" href="/assets/js/93.46cbb285.js"><link rel="prefetch" href="/assets/js/94.d257369c.js"><link rel="prefetch" href="/assets/js/95.1e0f1c87.js"><link rel="prefetch" href="/assets/js/96.2d50fbfa.js"><link rel="prefetch" href="/assets/js/97.bd6f83f8.js"><link rel="prefetch" href="/assets/js/98.a43de027.js"><link rel="prefetch" href="/assets/js/99.b803bf0e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3253b276.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>xiaolong</h3> <p class="description" data-v-59e6cb88>描述</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>xuxiaolong</span>
          
        <span data-v-59e6cb88>2019 - </span>
        2025
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo2.png" alt="xiaolong" class="logo"> <span class="site-name">xiaolong</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-cafei"></i>
      Java
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/Java开发技巧/高效编程/1_资源关闭优化方案.html" class="nav-link"><i class="iconfont icon-LBhouduanfuwuzu"></i>
  Java开发技巧
</a></li><li class="dropdown-item"><!----> <a href="/Java/JVM性能调优/JVM概念/0_JVM体系结构.html" class="nav-link"><i class="iconfont icon-duozhongzhifu"></i>
  JVM性能调优
</a></li><li class="dropdown-item"><!----> <a href="/Java/并发编程/JUC.html" class="nav-link"><i class="iconfont icon-bingfashuliang"></i>
  并发编程
</a></li><li class="dropdown-item"><!----> <a href="/Java/容器/Docker/0_Docker介绍及使用.html" class="nav-link"><i class="iconfont icon-rongqi"></i>
  容器相关
</a></li><li class="dropdown-item"><!----> <a href="/Java/设计模式/1基本概念/设计模式.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/Java/微服务专栏/流控组件Sentinel/微服务保护.html" class="nav-link"><i class="iconfont icon-mseweifuwuyinqing"></i>
  微服务专栏
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式事务/分布式事务Seata.html" class="nav-link"><i class="iconfont icon-jiagou"></i>
  架构设计
</a></li><li class="dropdown-item"><!----> <a href="/Java/数据结构/排序算法.html" class="nav-link"><i class="iconfont icon-shujujiegou"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/Java/系统优化/系统优化/1_幂等设计.html" class="nav-link"><i class="iconfont icon-icon_nav_xitongyouhua_default"></i>
  系统优化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-python"></i>
      Python
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Python/基础语法/Python基础语法.html" class="nav-link"><i class="iconfont icon-jichuyufa"></i>
  基础语法
</a></li><li class="dropdown-item"><!----> <a href="/Python/数据分析/1_Python数据分析.html" class="nav-link"><i class="iconfont icon-shujufenxi"></i>
  数据分析
</a></li><li class="dropdown-item"><!----> <a href="/Python/AI大模型应用开发/Python AI大模型应用开发.html" class="nav-link"><i class="iconfont icon-AIdamoxing"></i>
  AI大模型应用开发
</a></li></ul></div></div><div class="nav-item"><a href="/数据库/MongoDB/0_MongoDB简介.html" class="nav-link"><i class="iconfont icon-shujuku"></i>
  数据库
</a></div><div class="nav-item"><a href="/Redis/1_Redis缓存三大问题.html" class="nav-link"><i class="iconfont icon-redis"></i>
  Redis专栏
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-zuzhijiagou"></i>
      常用框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/常用框架/Activiti7/Activiti整合Spring.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  工作流引擎Activiti7
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Caffeine/0_Caffeine基本概念.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  缓存框架Caffeine
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/EasyCaptcha/0_使用EasyCaptcha生成验证码.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  验证码EasyCaptcha
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/EasyExcel/0_EasyExcel概述.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  表格工具EasyExcel
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式搜索/分布式搜索引擎Elasticsearch01.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  搜索引擎ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Mybatis/Mybatis-Plus-Join连表查询.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  三剑客Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/ShardingJdbc/0_ShardingJdbc的概述.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  分库分表ShardingJdbc
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Spring/Spring容器初始化源码解析.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  三剑客Spring
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/SpringBoot/SpringBoot程序开发/2_SpringBoot程序测试.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  三剑客SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式监控/SpringBootAdmin.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  监控工具SpringBootAdmin
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/XXL-JOB/0_分布式任务调度框架概述.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  任务调度XXL-JOB
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Thymeleaf/1_基本语法.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  模板引擎Thymeleaf
</a></li></ul></div></div><div class="nav-item"><a href="/Linux/0_Linux常用命令.html" class="nav-link"><i class="iconfont icon-centos"></i>
  Linux
</a></div><div class="nav-item"><a href="/StableDiffusion/StableDiffusion/0_StableDiffusion介绍.html" class="nav-link"><i class="iconfont icon-a-stablediffusion"></i>
  Stable Diffusion
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-biji"></i>
      随笔文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/日常笔记/IDEA+Linux远程开发.html" class="nav-link"><i class="undefined"></i>
  🚀日常笔记
</a></li><li class="dropdown-item"><!----> <a href="/docs/开发文档/PDF转换.html" class="nav-link"><i class="undefined"></i>
  🚀开发文档
</a></li><li class="dropdown-item"><!----> <a href="/docs/开源项目/0_开源项目.html" class="nav-link"><i class="undefined"></i>
  🚀开源项目
</a></li><li class="dropdown-item"><!----> <a href="/docs/软考中级软件设计师学习笔记/01_计算机组成与体系结构.html" class="nav-link"><i class="undefined"></i>
  🚀软考中级
</a></li><li class="dropdown-item"><!----> <a href="/docs/面试专栏/面试专栏.html" class="nav-link"><i class="undefined"></i>
  🚀面试专栏
</a></li><li class="dropdown-item"><!----> <a href="/docs/高等数学/1_高等数学预备知识.html" class="nav-link"><i class="undefined"></i>
  🚀高等数学
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-date"></i>
      项目
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>我的项目🎈</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/Daneliya/springboot_chowder" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  springboot_chowder
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/Daneliya/Daneliya.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  博客项目
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/Daneliya/aggregated-search-platform" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  聚合搜索平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/Daneliya/xuapi" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  API 接口开放平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>学习项目🎈</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/project.html" class="nav-link"><i class="undefined"></i>
  学成在线
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont icon-shijianzhou"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Daneliya" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/xu_xiaolong" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/logo2.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    xuxiaolong
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>298</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>75</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-cafei"></i>
      Java
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/Java开发技巧/高效编程/1_资源关闭优化方案.html" class="nav-link"><i class="iconfont icon-LBhouduanfuwuzu"></i>
  Java开发技巧
</a></li><li class="dropdown-item"><!----> <a href="/Java/JVM性能调优/JVM概念/0_JVM体系结构.html" class="nav-link"><i class="iconfont icon-duozhongzhifu"></i>
  JVM性能调优
</a></li><li class="dropdown-item"><!----> <a href="/Java/并发编程/JUC.html" class="nav-link"><i class="iconfont icon-bingfashuliang"></i>
  并发编程
</a></li><li class="dropdown-item"><!----> <a href="/Java/容器/Docker/0_Docker介绍及使用.html" class="nav-link"><i class="iconfont icon-rongqi"></i>
  容器相关
</a></li><li class="dropdown-item"><!----> <a href="/Java/设计模式/1基本概念/设计模式.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/Java/微服务专栏/流控组件Sentinel/微服务保护.html" class="nav-link"><i class="iconfont icon-mseweifuwuyinqing"></i>
  微服务专栏
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式事务/分布式事务Seata.html" class="nav-link"><i class="iconfont icon-jiagou"></i>
  架构设计
</a></li><li class="dropdown-item"><!----> <a href="/Java/数据结构/排序算法.html" class="nav-link"><i class="iconfont icon-shujujiegou"></i>
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/Java/系统优化/系统优化/1_幂等设计.html" class="nav-link"><i class="iconfont icon-icon_nav_xitongyouhua_default"></i>
  系统优化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-python"></i>
      Python
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Python/基础语法/Python基础语法.html" class="nav-link"><i class="iconfont icon-jichuyufa"></i>
  基础语法
</a></li><li class="dropdown-item"><!----> <a href="/Python/数据分析/1_Python数据分析.html" class="nav-link"><i class="iconfont icon-shujufenxi"></i>
  数据分析
</a></li><li class="dropdown-item"><!----> <a href="/Python/AI大模型应用开发/Python AI大模型应用开发.html" class="nav-link"><i class="iconfont icon-AIdamoxing"></i>
  AI大模型应用开发
</a></li></ul></div></div><div class="nav-item"><a href="/数据库/MongoDB/0_MongoDB简介.html" class="nav-link"><i class="iconfont icon-shujuku"></i>
  数据库
</a></div><div class="nav-item"><a href="/Redis/1_Redis缓存三大问题.html" class="nav-link"><i class="iconfont icon-redis"></i>
  Redis专栏
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-zuzhijiagou"></i>
      常用框架
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/常用框架/Activiti7/Activiti整合Spring.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  工作流引擎Activiti7
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Caffeine/0_Caffeine基本概念.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  缓存框架Caffeine
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/EasyCaptcha/0_使用EasyCaptcha生成验证码.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  验证码EasyCaptcha
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/EasyExcel/0_EasyExcel概述.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  表格工具EasyExcel
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式搜索/分布式搜索引擎Elasticsearch01.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  搜索引擎ElasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Mybatis/Mybatis-Plus-Join连表查询.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  三剑客Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/ShardingJdbc/0_ShardingJdbc的概述.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  分库分表ShardingJdbc
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Spring/Spring容器初始化源码解析.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  三剑客Spring
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/SpringBoot/SpringBoot程序开发/2_SpringBoot程序测试.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  三剑客SpringBoot
</a></li><li class="dropdown-item"><!----> <a href="/Java/架构设计/分布式/分布式监控/SpringBootAdmin.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  监控工具SpringBootAdmin
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/XXL-JOB/0_分布式任务调度框架概述.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  任务调度XXL-JOB
</a></li><li class="dropdown-item"><!----> <a href="/常用框架/Thymeleaf/1_基本语法.html" class="nav-link"><i class="iconfont icon-iconfontmoshi"></i>
  模板引擎Thymeleaf
</a></li></ul></div></div><div class="nav-item"><a href="/Linux/0_Linux常用命令.html" class="nav-link"><i class="iconfont icon-centos"></i>
  Linux
</a></div><div class="nav-item"><a href="/StableDiffusion/StableDiffusion/0_StableDiffusion介绍.html" class="nav-link"><i class="iconfont icon-a-stablediffusion"></i>
  Stable Diffusion
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont icon-biji"></i>
      随笔文档
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/日常笔记/IDEA+Linux远程开发.html" class="nav-link"><i class="undefined"></i>
  🚀日常笔记
</a></li><li class="dropdown-item"><!----> <a href="/docs/开发文档/PDF转换.html" class="nav-link"><i class="undefined"></i>
  🚀开发文档
</a></li><li class="dropdown-item"><!----> <a href="/docs/开源项目/0_开源项目.html" class="nav-link"><i class="undefined"></i>
  🚀开源项目
</a></li><li class="dropdown-item"><!----> <a href="/docs/软考中级软件设计师学习笔记/01_计算机组成与体系结构.html" class="nav-link"><i class="undefined"></i>
  🚀软考中级
</a></li><li class="dropdown-item"><!----> <a href="/docs/面试专栏/面试专栏.html" class="nav-link"><i class="undefined"></i>
  🚀面试专栏
</a></li><li class="dropdown-item"><!----> <a href="/docs/高等数学/1_高等数学预备知识.html" class="nav-link"><i class="undefined"></i>
  🚀高等数学
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-date"></i>
      项目
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>我的项目🎈</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/Daneliya/springboot_chowder" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  springboot_chowder
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/Daneliya/Daneliya.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  博客项目
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/Daneliya/aggregated-search-platform" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  聚合搜索平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/Daneliya/xuapi" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  API 接口开放平台
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>学习项目🎈</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/project/project.html" class="nav-link"><i class="undefined"></i>
  学成在线
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont icon-shijianzhou"></i>
  时间线
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/Daneliya" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/xu_xiaolong" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Redis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Redis/1_Redis缓存三大问题.html" class="sidebar-link">Redis缓存三大问题</a></li><li><a href="/Redis/2_内存淘汰策略.html" class="active sidebar-link">内存淘汰策略</a></li><li><a href="/Redis/3_BigKey、HotKey 的发现与处理.html" class="sidebar-link">BigKey、HotKey 的发现与处理</a></li><li><a href="/Redis/4_springboot整合Redisson.html" class="sidebar-link">springboot整合Redisson</a></li><li><a href="/Redis/5_Redis延迟队列.html" class="sidebar-link">Redis延迟队列</a></li><li><a href="/Redis/6_Redis实战之解决限流问题.html" class="sidebar-link">Redis解决限流问题</a></li><li><a href="/Redis/7_Redis实战之解决超卖问题.html" class="sidebar-link">Redis解决超卖问题</a></li><li><a href="/Redis/INCR命令之微信文章阅读量.html" class="sidebar-link">INCR命令之微信文章阅读量</a></li><li><a href="/Redis/RediSearch全文搜索引擎.html" class="sidebar-link">/Redis/RediSearch全文搜索引擎.html</a></li><li><a href="/Redis/RedisTemplate.html" class="sidebar-link">/Redis/RedisTemplate.html</a></li><li><a href="/Redis/Redis数据结构.html" class="sidebar-link">Redis数据结构</a></li><li><a href="/Redis/Set结构实战之用户画像标签去重.html" class="sidebar-link">Set结构实战之用户画像标签去重</a></li><li><a href="/Redis/Set结构实战之社交应用中的共同好友.html" class="sidebar-link">Set结构实战之社交应用中的共同好友</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>内存淘汰策略</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>xuxiaolong</span>
          
        <span data-v-59e6cb88>2019 - </span>
        2025
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">内存淘汰策略</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>xuxiaolong</span></i> <!----> <i class="iconfont reco-eye" data-v-8a445198><span id="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-8a445198><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>Redis</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="一、redis过期删除策略"><a href="#一、redis过期删除策略" class="header-anchor">#</a> 一、Redis过期删除策略</h2> <p>Redis对于过期的key，有两种删除策略：</p> <ol><li>定时删除</li> <li>定期删除</li> <li>惰性删除</li></ol> <h3 id="定时删除"><a href="#定时删除" class="header-anchor">#</a> 定时删除</h3> <p>在设置键的过期时间的同时，设置一个定时器，当键过期了，定时器马上把该键删除。</p> <p>定时删除对内存来说是友好的，因为它可以及时清理过期键；但对CPU是不友好的，如果过期键太多，删除操作会消耗过多的资源。</p> <h3 id="定期删除"><a href="#定期删除" class="header-anchor">#</a> 定期删除</h3> <p>redis 会将每个设置了过期时间的 key 放入到一个独立的字典中，以后会定期遍历这个字典来删除到期key。</p> <p>Redis 默认会每秒进行十次过期扫描（100ms一次），过期扫描不会遍历过期字典中所有的 key，而是采用了一种简单的<strong>贪心策略</strong>。</p> <ol><li>从过期字典中随机 20 个 key；</li> <li>删除这 20 个 key 中已经过期的 key；</li> <li>如果过期的 key 比率超过 1/4，那就重复步骤 1；</li></ol> <p>redis默认是每隔 100ms就随机抽取一些设置了过期时间的key，检查其是否过期，如果过期就删除。</p> <p>注意这里是随机抽取的。为什么要随机呢？你想一想假如 redis 存了几十万个 key ，每隔100ms就遍历所有的设置过期时间的 key 的话，就会给 CPU 带来很大的负载。</p> <p>定期删除是定时删除和惰性删除的一个折中方案。每隔一段时间来删除过期键，可以根据实际场景自定义这个间隔时间，在CPU资源和内存资源上作出权衡。</p> <h3 id="惰性删除"><a href="#惰性删除" class="header-anchor">#</a> 惰性删除</h3> <p>所谓惰性策略就是在客户端访问这个key的时候，redis对key的过期时间进行检查，如果过期了就立即删除，不会给你返回任何东西。</p> <p>为啥需要两种删除策略呢？</p> <p>定期删除可能会导致很多过期key到了时间并没有被删除掉。所以就有了惰性删除。假如你的过期 key，靠定期删除没有被删除掉，还停留在内存里，除非你的系统去查一下那个 key，才会被redis给删除掉。这就是所谓的惰性删除，即当你主动去查过期的key时，如果发现key过期了，就立即进行删除，不返回任何东西。</p> <p>总结：定期删除是集中处理，惰性删除是零散处理。</p> <h2 id="二、配置redis内存"><a href="#二、配置redis内存" class="header-anchor">#</a> 二、配置Redis内存</h2> <p>Redis是基于内存key-value键值对的内存数据库，我们安装完数据库之后，内存往往会受到系统内存大小的限制，我们也可以配置redis能使用的最大的内存大小。</p> <p>两种方式配置redis的内存：</p> <ul><li>通过配置文件修改</li> <li>通过客户端修改</li></ul> <h3 id="通过配置文件修改"><a href="#通过配置文件修改" class="header-anchor">#</a> 通过配置文件修改</h3> <p>我们可以通过配置文件修改，安装完redis之后我们可以在redis根目录中找到redis.conf文件,在配置文件中添加一下参数就可以设置redis的内存大小了</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 设置 Redis 最大使用内存大小为100M</span>
maxmemory 100mb    //指定最大内存为100mb
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面的配置设置了，当 Redis 使用的内存超过 100Mb 时,就开始对数据进行淘汰。</p> <p>下面是更加详细的例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#配置文件</span>
maxmemory <span class="token operator">&lt;</span>bytes<span class="token operator">&gt;</span>
下面的写法均合法：
maxmemory <span class="token number">1024000</span>
maxmemory 1GB
maxmemory 1G
maxmemory 1024KB
maxmemory 1024K
maxmemory 1024MB
<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="通过客户端修改"><a href="#通过客户端修改" class="header-anchor">#</a> 通过客户端修改</h3> <p>在服务器上输入redis-cli之后进入redis客户端，通过命令动态修改redis内存大小</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>//设置Redis最大占用内存大小为100M
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config <span class="token builtin class-name">set</span> maxmemory 100mb
//获取设置的Redis能使用的最大内存大小
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config get maxmemory
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果不设置，或者设置最大内存大小为0，在64位操作系统下，Redis不限制内存大小，在32位操作系统，Redis最多使用3GB内存。</p> <p>下面是更加详细的例子：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#命令行</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config get maxmemory
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;maxmemory&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;0&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config <span class="token builtin class-name">set</span> maxmemory 1GB
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config get maxmemory
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;maxmemory&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;1073741824&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="三、redis内存淘汰策略"><a href="#三、redis内存淘汰策略" class="header-anchor">#</a> 三、Redis内存淘汰策略</h2> <p>我们设置完redis内存之后，我们就像里面放数据，但是内存总有满的时候，满的时候redis又是怎么处理的呢？</p> <p>每进行一次redis操作的时候，redis都会检测可用内存，判断是否要进行内存淘汰，当超过可用内存的时候，redids 就会使用对应淘汰策略。</p> <h3 id="八种内存淘汰策略"><a href="#八种内存淘汰策略" class="header-anchor">#</a> 八种内存淘汰策略</h3> <p>redis内存淘汰策略，具体如下：</p> <ol><li><strong>no-envicition</strong>
该策略对于写请求不再提供服务，会直接返回错误，当然排除del等特殊操作，redis默认是no-envicition策略。</li> <li><strong>allkeys-random</strong>
从redis中随机选取key进行淘汰。</li> <li><strong>allkeys-lru</strong>
使用LRU（Least Recently Used，最近最少使用）算法，从redis中选取使用最少的key进行淘汰。</li> <li><strong>volatile-random</strong>
从redis中设置过过期时间的key，进行随机淘汰。</li> <li><strong>volatile-ttl</strong>
从redis中选取即将过期的key，进行淘汰。</li> <li><strong>volatile-lru</strong>
使用LRU（Least Recently Used，最近最少使用）算法，从redis中设置过过期时间的key中，选取最少使用的进行淘汰。</li> <li><strong>volatile-lfu</strong>
使用LFU（Least Frequently Used，最不经常使用），从设置了过期时间的键中选择某段时间之内使用频次最小的键值对清除掉。</li> <li><strong>allkeys-lfu</strong>
使用LFU（Least Frequently Used，最不经常使用），从所有的键中选择某段时间之内使用频次最少的键值对清除。</li></ol> <p>主要是4种算法，针对不同的key，形成的策略。</p> <p>算法：</p> <ol><li>random：随机淘汰。</li> <li>ttl：快要过期的先淘汰。</li> <li>lru（Least Recently Used）：最近很少的使用的key（根据时间，最不常用的淘汰）。</li> <li>lfu（Least Frequently Used）：最近很少的使用的key (根据计数器，用的次数最少的key淘汰)。</li></ol> <p>key ：</p> <ol><li>volatile：有过期的时间的那些key。</li> <li>allkeys：所有的key。</li></ol> <h3 id="内存淘汰算法的具体工作原理"><a href="#内存淘汰算法的具体工作原理" class="header-anchor">#</a> 内存淘汰算法的具体工作原理</h3> <ul><li>客户端执行一条新命令，导致数据库需要增加数据（比如set key value）</li> <li>Redis会检查内存使用，如果内存使用超过 maxmemory，就会按照置换策略删除一些 key</li> <li>新的命令执行成功</li></ul> <h3 id="如何设置淘汰策略"><a href="#如何设置淘汰策略" class="header-anchor">#</a> 如何设置淘汰策略</h3> <p>可以命令查看当前redis使用的淘汰策略</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>config get maxmemory-policy    //获取当前内存淘汰策略
config set maxmemory-policy valatile-lru  //通过命令修改淘汰策略
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="四、redis-内存淘汰算法"><a href="#四、redis-内存淘汰算法" class="header-anchor">#</a> 四、Redis 内存淘汰算法</h2> <p>Redis 的淘汰算法有多种，如下：</p> <ol><li>random</li> <li>TTL</li> <li>LRU（Least Recently Used，最近最少使用）</li> <li>LFU（Least Frequently Used，最不经常使用）</li></ol> <p>random随机算法很好理解，就是从数据库中随机淘汰一些 Keys。</p> <p>TTL 算法就是从设置了过期时间的 Keys 中获取最早过期的 一批 Keys，然后淘汰这些 Keys。</p> <p>而 LRU 和 LFU 这两种算法在名字上比较容易混淆，所以这里介绍一下这两种算法的区别。</p> <p>在缓存的内存淘汰策略中有FIFO、LRU、LFU三种，其中LRU和LFU是Redis在使用的。FIFO是最简单的淘汰策略，遵循着先进先出的原则，这里简单提一下：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqUAAACWCAYAAADnqfEYAAAa40lEQVR4Ae3dCayUVZbA8VMsjaAkI+4LouNDhRC3lsgAxm6djIpR6TS0xnZkEiPEdCtv4pjY46ioPUkbmQg9E404iZi4TBqMGlnUNEyjQCDukXaBh6K4Nhp1RFpUrMl5eIrzLvdWfVXv1ftq+VdC7nbuuff7FW0f6y0WisViUXghgAACCCCAAAIIIJCjwIAcz+ZoBBBAAAEEEEAAAQS6BShK+YuAAAIIIIAAAgggkLsARWnubwEXQAABBBBAAAEEEKAo5e8AAggggAACCCCAQO4CFKW5vwVcAAEEEEAAAQQQQICilL8DCCCAAAIIIIAAArkLDMp6A/3NUevWrZPVq1fLhx9+KDt27Mi6lTgEEEAAAQQQQACBNhAYNmyYHHbYYTJ58mSZMGGCFAqFzE9dqPR7SrUYfeihh+TGG2+Ut99+W0aOHClHHnmk6KG8EEAAAQQQQAABBBAwAf3Q8r333pOtW7fKMcccI7fddptceumlmYrTsp+UauIZM2bI0qVL5eqrr5aZM2fKsccea+fSIoAAAggggAACCCCwl0BXV5fce++9cuWVV8rjjz8u999/vwwdOnSvOD+R/KR0165dMmXKFNm8ebM88cQTMmbMGL+PPgIIIIAAAggggAACZQVef/11ueCCC6Sjo6P7Q86BAwcm45M/6DRnzhx5+eWXZeXKlRSkST4WEEAAAQQQQAABBFIC+qHmihUr5KWXXpJbbrklFdY9H/2kVL8XYPTo0XLffffJJZdcUjYBiwgggAACCCCAAAIIlBN4+OGH5YorrpCNGzd2/2xSLDb6SenChQu7f3Lq4osvju1hDgEEEEAAAQQQQACBzAL6Ieehhx7a/b2lqU3RolR/sOnCCy/M9JNSqcTMI4AAAggggAACCCCgAvqrofR7S5csWZIEiRal+sNNJ5xwQnITCwgggAACCCCAAAIIVCOgteVbb72V3BItSj/55BM54IADkptYQAABBBBAAAEEEECgGoEDDzxQtm3bltwSLUr1F+ZX8xv4k9lZQAABBBBAAAEEEEDghy/ha42ZekWL0lQw8wgggAACCCCAAAII1EOAorQequREAAEEqhDwX5nyfUsRm7O1sK0mNtzLGAEEEMhTgKI0T33ORgABBAIBvn0qAGGIAAJtIzCobZ6UB0UAAQQaWEA/4Qy/18p/6un7Fufn/KPF5m2Pj6OPAAIINJIARWkjvRvcBQEE2k5AC8iwYLSxtrF1Q7I4G2tbLt7H0UcAAQQaTYAv3zfaO8J9EEAgB4EumT+p0F3QaVFnf2Yt3z0/aX7XD3dKxbkrd82XSS6H5pq13K0H3VhhaSG+wNR+7GV3tVZjrG9tbB9zCCCAQKMJUJQ22jvCfRBAIDeBifM2dX9qqYWi/rnnvPhVknHLZ0lhdKeMW7Z7f3eeTfNkw5SC7Clse+a0wlFbfdm4Z1R6ZHe1ViOtb216NysIIIBA4whQlDbOe8FNEECgqQWWy6wpC0QL1h7FbMdsWbNspqztvENiH5hq4aivsDUKX6TG+jZnre6zfthaTloEEECgEQUoShvxXeFOCCDQfAJdG2WDTJRfnN+x991Hj5WJskE22ncB7B0RnbFPOn3BGvZjMZrMz1s/egiTCCCAQIMIUJQ2yBvBNRBAIH+BtZ2j3aeMs6KfbOot03Hj5LhITSodx8m4xOPpp5n6sjYRVnFa91vBGgb3NneYjzECCCBQDwGK0nqokhMBBJpSoOf3it4jiW8p7f4SvX36WCz6uMSnod2fosZJrJC01kdpMWl/dN73wzg/1lxWiGoby+3j6SOAAAKNIEBR2gjvAndAAIHmF+j+NHStvLZp70fpWvoHWTvxFxL7yv7e0XtmtJi0Pzrr+xaVKjo1NrVme2kRQACBRhLg95Q20rvBXRBAoIkFzpPr5k2U0VMmydhNa2S2fRm/a77M6FwrM5etEZuKPWS1BaTG60uLT//yeShMvQx9BBBodAGK0kZ/h7gfAgg0jUDH7DVSPE5/LVRBOku3nijzNhX3FKml+Z4dKy6tqLS2Z9SekcXvmdn95f1w3gpTjQvX/F76CCCAQN4ChWLkn1L6D8NFixbJtGnT8r4f5yOAAAJtIxAWojqOvSL/2OZL9TEo5hBAoKEEFi9eLNOnT0/+CzKflDbU28VlEECgnQXCYjMcl7OpJrZcHtYQQACBvAT4Qae85DkXAQQQQAABBBBAoCRAUVqioIMAAggggAACCCCQlwBFaV7ynIsAAggggAACCCBQEqAoLVHQQQABBBBAAAEEEMhLgKI0L3nORQABBBBAAAEEECgJUJSWKOgggAACCCCAAAII5CVAUZqXPOcigAACCCCAAAIIlAQoSksUdBBAAAEEEEAAAQTyEqAozUuecxFAAAEEEEAAAQRKAhSlJQo6CCCAAAIIIIAAAnkJUJTmJc+5CCCAAAIIIIAAAiUBitISBR0EEEAAAQQQQACBvAQoSvOS51wEEEAAAQQQQACBkgBFaYmCDgIIIIAAAggggEBeAhSleclzLgIIIIAAAggggEBJgKK0REEHAQQQQAABBBBAIC8BitK85DkXAQQQQAABBBBAoCRAUVqioIMAAggggAACCCCQlwBFaV7ynIsAAggggAACCCBQEqAoLVHQQQABBBBAAAEEEMhLgKI0L3nORQABBBBAAAEEECgJUJSWKOgggAACCCCAAAII5CVAUZqXPOcigAACCCCAAAIIlAQoSksUdBBAAAEEEEAAAQTyEqAozUuecxFAAAEEEEAAAQRKAhSlJQo6CCCAAAIIIIAAAnkJUJTmJc+5CCCAAAIIIIAAAiUBitISBR0EEEAAAQQQQACBvAQG5XUw5/YUKBQKPScYIYAAAggggEDuAsViMfc7tMsFKEob6J0u/qmBLtNHVyn8RKTVnqsVn8m/3a36fDyXf5cbu8971djvj79dq75X9oz6fLz6T4Av3/efNSchgAACCCCAAAIIJAQoShMwTCOAAAIIIIAAAgj0nwBFaf9ZcxICCCCAAAIIIIBAQoCiNAHDNAIIIIAAAggggED/CVCU9p81JyGAAAIIIIAAAggkBChKEzBMI4AAAggggAACCPSfAEVp/1lzEgIIIIAAAggggEBCgKI0AcM0AggggAACCCCAQP8JUJT2nzUnIYAAAggggAACCCQEKEoTMEwjgAACCCCAAAII9J8ARWmdrZ//vEt2Fb+v8ymkRwABBBBAAAEEmluAorTO79+cN/5HfrzqWnnm0z/X+STSI4AAAggggAACzStAUVrn9+6JCTfIvx03XS5/cb5c/Pxcefev2+p8IukRQAABBBBAoBUFttx8s/x56lT5+q23WvHxhKK0zm9rQQoy7fCJ8tpZ/yljh4+UU/90rdz65h/kr7u+qfPJpEcAAQQQQACBVhI46je/keHjx8sL48fL2zfcILu2b2+lx6Mo7a93c9jAIXLz8RfLC2f+h2z4v3dkzMpfy+IP1kpRiv11Bc5BAAEEEEAAgSYWGLDPPnLUDTfIaa+8Il9v2SLPjRkjf3n4YZFia9QSg5r4vYle/aOdn8u/bLgvutYokz8aMEi++/57mf7cHd1X2vj3dzXK1bgHAggggAACCDS4wJAjj5QxDz4oX6xZI13XXCMf3HWXdPz+97LfKac0+M3LX6/litJ9Bw6Rcw8+tfxT57y6fdfX8synr3Xf4pyDT5Gjhh6Y8404HgEEEEAAAQRiAl88+6x898UXsaWGmBt1003y8cKF8sKpp8qPDj1UTnv1VRl8YHPWFS1XlA4fNFQuG3lmQ/xFCS+hX6p/cOsz8ts3F8nZB50ovxv7j3LYPvuHYYwRQAABBBBAoEEEtj3yiHzd1dUgt4lf49tPP+1e+Oajj+Szp56Sg3/5y3hgg8+2XFHaqN76+0qvefW/5Zvvv5NF46+TvxtxfKNelXshgAACCCCAwA8CHfPmNaxF8bvv5MMFC2TLnDly+K9+JcfceqsMGjGiYe9b6WIUpZWEern+l51fyL++/oAs/eh5+fexl8k/jTxLBhQKvczKdgQQQAABBBBoZ4HPV63q/n7SwSNGyEl//KPse+KJTc9BUVrnt/CsNTfJPxx8srx+9n/J3wzet86nkR4BBBBAAAEEWllg57vvyubrrpMv16+Xv507Vw76+c9FWuTDLorSOv/NfeWnd8rAAr8Ots7MpEcAAQQQQKDlBT5+4AHZ3NkpR1xzjZywcKEMGDq0pZ6ZorTObycFaZ2BSY8AAggggECbCOx38sny4xdflCFHHdWST0xR2pJvKw+FAAIIIIAAAq0msO+4ca32SD2eh68r9+BggAACCCCAAAIIIJCHAEVpHuqciQACCCCAAAIIINBDgKK0BwcDBBBAAAEEEEAAgTwEKErzUOdMBBBAAAEEEEAAgR4CFKU9OBgggAACCCCAAAII5CFAUZqHOmcigAACCCCAAAII9BCgKO3BwQABBBBAAAEEEEAgDwGK0jzUORMBBBBAAAEEEECghwBFaQ8OBggggAACCCCAAAJ5CFCU5qHOmQgggAACCCCAAAI9BPjPjPbgyHdQ+Em+59fr9FZ8rlZ8Jv/+t+rz8Vz+XW7sPu9VY78//nat+l75Z6TfPwIUpf3jXPGUYrFYMYYABBBAAAEEEECgVQX48n2rvrM8FwIIIIAAAggg0EQCFKVN9GZxVQQQQAABBBBAoFUF+PJ9q76zPBcCCCCAAALVChQK1e4gvp0F+vhbD+tSlBYe/1k7v0U8OwIlgeJFj5b6dBBAAIGmEOjjQqMpnplLVi9Qh3+BqUtRqk/G/xlX//6yo7UE+Jez1no/eRoEEEAAgfoK8D2l9fUlOwIIIIAAAggggEAGAYrSDEiEIIAAAggggAACCNRXgKK0vr5kRwABBBBAAIEKAquq/P7ErPE+zvftOrE5W4u11cbHclSa6+0Zqf2peb1PubVK9+3L9aYsSrN8r57GhHF+7PseNDWvMam11LzlrbRucX3d1vPcMLcf+749U2zO1mJttfGaI9wTjsNzKq2H8YwRQAABBHovoAVQNUVQ1thKcWcWi1Wd25sntWes1MbOKHfPMJ/tTz17at72xdrwDD+OxfflXN1+0KkvLxnm0h+i0oIi/GEqX2SEa1lypHLGcsViwzNiY3/HcN2fE+bPui/MWc24r87Q5wjvX809ao2t9txy8aGFf29qvR/7EEAAgXYV8MWRFl3+ZWvWhus+tpa+5g1z2lmaz/d9nJ/358bm/T6Ljc3ZWniuzfvcvu9zWT9c17GtWX4/tjOytLF9/rwsOWqJaaqiNCwU/NiKBmvLYfh9vq97bGx5tNU5G1uMH5c7K7YW22vnWnx4rt8T3sf29Lbt7Rmxe/nn8v3wrNjdfbyt+302V0vrc/u+z299v17LWexBAAEE2l3AipywsIkVUn1lFebWvHYPbWPr/myL9XOV9vjYWvqxM7Pk0XvpK9b6nLausWZg+ev9bHZOubapilItErRAsGJBHywcl3tYv1Yuhy9CrB9rwxyW3+ZtT633tDyWN0vrz7RzbZ/mC9d1LTxHY2wu1becdobF27yNtfU5bN23FuvnKu1JxcZy+VjrZ42zeFoEEEAAASewfJasmrKgNDFs3iYZP7ujNM7SsSIobLPszRLji7Ew3s7Ued+PxVWaS52jeat9xe4Smwvz2h38mTansT6H71uMn7P48Iz+GOdclK6XWY//ThbI0TLvrDtl9vDKj+yLnKyFi8bZK+z74iSWz9b9PpvTnH6P7+uaxYXzPpfdy7dZ4sMcdpa1sbvZGWGMzYd7dKyx4X18vMWEczb2e33f1q0Nn0fnwzl/b9unbZY7+njLHeYrd79wP2MEEECgfQWWy2tTRMYWi3KQInQXqDPknfPXyKhEXeqLJetbQaRtWBSFtrbHz8fmUut2hq7buT421Q9jK93T5wn3+rVU3+5pe1PnxeZtLmxTZ5Wbt/M1xvKVi++rtdyK0q43/1lGvzFKlp11mWxYuTrT8/gixfrWWoFhY0uo835N+xZj8z7W+r7VeNvnWx9TTd+fa7n9/vCMWHxsn89RS99crM2aw8fb3XWvv3elXGFsPZ7P38HuaeemzkvN+1z0EUAAgfYSOE/GFs/b88jnTZWDZIF8tUlEEkWpFTmxAsfP+b4dYHttrG0szq9rX/f5OBtbnK7Zy/p2lo1t3bepNdvrY30/3BfG+/VYP4wPc4frOrY81g9jfI5G6OdWlHYcf6cUjxeRLx+R32aUsAKiXLjFVComdN2/wrGtxfJYQaMx1rdzbV9v21g+f5d6nOvP9GelbOwZw7vY2Nb9fuvbWTa2WN+m1myvj43N+XXf93lj/Wpy+bz0EUAAgbYU6NooX8lEOXh0tqfXQsmKJN1hhZLNZ8vSuyg7U7PEzvXrdpLFWWvz5VqN9a9YXlsvt2Yx1mqsv4ft9XMaa/O2r1zr94b39uNqcpY7L7aWW1Eau0w1c1pM1Fo8VLPPYsPzbD7rnf1+Xwjpfj/2ecM9tmbzOra9tpb1PtXE9Sa332v39mf7dZu3OGttPmzt2cN5Pw5j9LzYmX6P72tspXv4ePoIIIBAuwlsu6NTdsxclvzSvXlYYRMWVLpua9bqXCzOcqVa3W9Fk+Xyc6l9lebL5Si3ZnfR/Bqnf+zl12yu1tbn9f1KZ6Ri/T6N8eNa75hlX1MVpWGB4cfVFBoK4/eGUD6Xj/N9HxPut3Eq3u/VGD+2vb4tF5PaW26Pz+37/r4678epc3xcLWf68y1X6qwwfyquUp7wTMYIIIAAArUJ7Jg/SV7bME/Gr3Ffzs+Qyhc5YdETjjOki4boGalcOu9fNvb3snVbs7HPm8pvsbG9thZrw3iLid3L1rS1dX+fVK7UPj+fV7+pilJfhIQFSi2APp/t94WYzlmMPy+Msb1h6/eGa5XG/jzN48e618bWVsqXZd3u6/Nn3Ze6h877l439WbZuazb2z53Kb7GpNrUvPMv2x+5la7QIIIAAAnsEtCB9rnOcjC3OlmF7pqM9K5Z8oWT9aoq8aPIaJq2I0612t1gaW7O7Woy/s83F2vCcWJ5wn9+ja+GeMN7GleKy3jmWz3KHd7PYvmqbqijVhw6LjHBcCcbHpwqTMEelOF88hXtTY5/T+tUURP5M3V/N3tSdKs3XcobfU+6etmYWdhf/nDZXqbVcGlduv7+bxoZnVzqHdQQQQKBdBbbNKuz+hDRakHbJO5NGy5Zxy+TMe3Z/ghorZvxctQVTNe5aUPmzsuxNFWE+V+rOFmM5/HnhPSzWx1TqW94wl41T65Xy6np4H8tpa1ly9CamgYvS92X+//5aOodfL8XTTu9+Rl9s2EOXKzosxoqNsAgJxxpvsbZXW4uzNRv7mCz98P4+j+XWPGFcOK50VqV4f1a5XD7O3zW1p9K5sX12Rpjf59I1P47lsblYXDX7LY+2qbv5GPoIIIBA2wl0zZct3b+itFOeK3TuefyJ+mX8yp+a7tmwu1epiLL11L5wPhxbYWUFl7VhnB/bHj8X26dxdr9wTzi2OJ8z1q8UF+b1OWyv3cvH6lps3u/Pu59fUfrBPCk8t6r0/GtX/kw6K/y+0rBwsc2Vio7UPis6LE+51mJjZ1khZG25PLWspe5v89Zmze3j7bl0r+/r2MdlyW3x5mBtub22x8fE9mmc3S+1p9ydbb/fa/n82b7vY/08fQQQQKCtBTpmy/ji7DIEHTJqTVFGlYnQJV9ApUJ9UZWK8fOW0+ZsvxVkOm+FmcVoa/ss3q9ZP7Xm5/05ts/a2Lm25lufT+ftbj4m7FuM32vn+Vb3+bHts3P8fpsLz6rnOL+i9PBOKV7k/g1rr6c8Qmb/9FEJ/9rHColYEbNXushErOgI89vYx2rfzrRW0/t5Hdte6/scNqdt+ArjbN3ns7mw9ffRNdtjOa21fX7s+7YetpYvnLe9/nydC+NtbPFhHh2n1mLzWfLFzoidY7lS8cwjgAACCPROwBc9vt+7rHt2p3KG8+F4T4Z4L2t8pbha1v0e3/c3rTQfrtvYWp/L+uXWLKav20KxWCyGSQuFgixatEimTZsWLmUa6/+5xwqITJsJQqBFBPjfQYu8kTwGAu0koD+VvndZ0E4CPGtWgRr+rixevFimT58ukdKz+9QBWc8mDgEEEEAAAQQQQACBeglQlNZLlrwIIIAAAggggAACmQUoSjNTEYgAAggggAACCCBQLwGK0nrJkhcBBBBAAAEEEEAgswBFaWYqAhFAAAEEEEAAAQTqJUBRWi9Z8iKAAAIIIIAAAghkFqAozUxFIAIIIIAAAggggEC9BChK6yVLXgQQQAABBBBAAIHMAhSlmakIRAABBBBAAAEEEKiXAEVpvWTJiwACCCCAAAIIIJBZYFDmSAIRQAABBBBAoPUF9D8fyQuBHATqVpTqf/ebFwIIIIAAAgg0kQD/3fsmerNa76rRonT//feXzz77rOanLV70aM172YgAAggggAACCCDQegJaW44YMSL5YNHvKT366KNl8+bNyU0sIIAAAggggAACCCBQjYDWlqNGjUpuiRal55xzjixZsiS5iQUEEEAAAQQQQAABBKoR0Nry3HPPTW6JFqUzZsyQN954Q55++unkRhYQQAABBBBAAAEEEMgi8NRTT3XXlpdffnkyvFAsxr+r+aqrrpIVK1bI+vXrRb/HlBcCCCCAAAIIIIAAAtUK6PeSnn766XL22WfL3XffndyeLEp37NghkydPliFDhshjjz0mhxxySDIJCwgggAACCCCAAAIIhAIff/yxTJ06VXbu3CmrV6+WYcOGhSGlcfTL97qqm5YvXy6FQkFOOumk7sr2q6++Km2kgwACCCCAAAIIIIBATEBrRv1UVGvIAQMGyJNPPlm2INUcyU9K7QCtbOfOnSu33367fPvttzJhwgQZOXJkxcS2nxYBBBBAAAEEEECgPQT0K+1bt26VdevWyeDBg+X666+Xa6+9tvsr75UEKhalluDLL7+UpUuXyrPPPivvv/++bN++3ZZoEUAAAQQQQAABBBCQ/fbbT4444gg544wz5Pzzz5fhw4dnVslclGbOSCACCCCAAAIIIIAAAlUKJL+ntMo8hCOAAAIIIIAAAgggULMARWnNdGxEAAEEEEAAAQQQ6CsBitK+kiQPAggggAACCCCAQM0CFKU107ERAQQQQAABBBBAoK8EKEr7SpI8CCCAAAIIIIAAAjUL/D8iNEfn3X4JMwAAAABJRU5ErkJggg==" alt="img"></p> <h3 id="lru算法"><a href="#lru算法" class="header-anchor">#</a> LRU算法</h3> <p>LRU（Least Recently Used，最近最少使用），主要是通过 Key 的最后访问时间来判定哪些 Key 更适合被淘汰，如下图所示：</p> <p><img src="/assets/img/2021033121023937.42c017da.png" alt="在这里插入图片描述"></p> <p>如上图所示，所有的 Keys 都根据最后被访问的时间来进行排序的，所以在淘汰时只需要按照所有 Keys 的最后被访问时间，由小到大来进行即可。</p> <p><img src="/assets/img/2021033121042516.d34f5096.png" alt="在这里插入图片描述"></p> <p><strong>LRU算法的特点：</strong></p> <ol><li><p>新增key value的时候首先在链表结尾添加Node节点，如果超过LRU设置的阈值就淘汰队头的节点并删除掉HashMap中对应的节点。</p></li> <li><p>修改key对应的值的时候先修改对应的Node中的值，然后把Node节点移动队尾。</p></li> <li><p>访问key对应的值的时候把访问的Node节点移动到队尾即可。</p></li></ol> <p><strong>Redis的LRU实现：</strong></p> <p>Redis维护了一个24位时钟，可以简单理解为当前系统的时间戳，每隔一定时间会更新这个时钟。每个key对象内部同样维护了一个24位的时钟，当新增key对象的时候会把系统的时钟赋值到这个内部对象时钟。比如我现在要进行LRU，那么首先拿到当前的全局时钟，然后再找到内部时钟与全局时钟距离时间最久的（差最大）进行淘汰，这里值得注意的是全局时钟只有24位，按秒为单位来表示才能存储194天，所以可能会出现key的时钟大于全局时钟的情况，如果这种情况出现那么就两个相加而不是相减来求最久的key。</p> <div class="language-c line-numbers-mode"><pre class="language-c"><code><span class="token keyword">struct</span> <span class="token class-name">redisServer</span> <span class="token punctuation">{</span>
       <span class="token class-name">pid_t</span> pid<span class="token punctuation">;</span> 
       <span class="token keyword">char</span> <span class="token operator">*</span>configfile<span class="token punctuation">;</span> 
       <span class="token comment">//全局时钟</span>
       <span class="token keyword">unsigned</span> lruclock<span class="token operator">:</span>LRU_BITS<span class="token punctuation">;</span> 
       <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">redisObject</span> <span class="token punctuation">{</span>
    <span class="token keyword">unsigned</span> type<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token keyword">unsigned</span> encoding<span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token comment">/* key对象内部时钟 */</span>
    <span class="token keyword">unsigned</span> lru<span class="token operator">:</span>LRU_BITS<span class="token punctuation">;</span>
    <span class="token keyword">int</span> refcount<span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token operator">*</span>ptr<span class="token punctuation">;</span>
<span class="token punctuation">}</span> robj<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Redis中的LRU与常规的LRU实现并不相同，常规LRU会准确的淘汰掉队头的元素，但是Redis的LRU并不维护队列，只是根据配置的策略要么从所有的key中随机选择N个（N可以配置）要么从所有的设置了过期时间的key中选出N个键，然后再从这N个键中选出最久没有使用的一个key进行淘汰。</p> <p>下图是常规LRU淘汰策略与Redis随机样本取一键淘汰策略的对比，浅灰色表示已经删除的键，深灰色表示没有被删除的键，绿色表示新加入的键，越往上表示键加入的时间越久。从图中可以看出，在redis 3中，设置样本数为10的时候能够很准确的淘汰掉最久没有使用的键，与常规LRU基本持平。</p> <p><img src="/assets/img/20210331210734240.8f097c25.png" alt="在这里插入图片描述"></p> <p><strong>为什么要使用近似LRU？</strong></p> <p>1、性能问题，由于近似LRU算法只是最多随机采样N个key并对其进行排序，如果精准需要对所有key进行排序，这样近似LRU性能更高</p> <p>2、内存占用问题，redis对内存要求很高，会尽量降低内存使用率，如果是抽样排序可以有效降低内存的占用</p> <p>3、实际效果基本相等，如果请求符合长尾法则，那么真实LRU与Redis LRU之间表现基本无差异</p> <p>4、在近似情况下提供可自配置的取样率来提升精准度，例如通过 CONFIG SET maxmemory-samples 指令可以设置取样数，取样数越高越精准，如果你的CPU和内存有足够，可以提高取样数看命中率来探测最佳的采样比例。</p> <h3 id="lfu算法"><a href="#lfu算法" class="header-anchor">#</a> LFU算法</h3> <p>LFU（Least Frequently Used）表示最不经常使用，它是根据数据的历史访问频率来淘汰数据，其核心思想是“如果数据过去被访问多次，那么将来被访问的频率也更高”。</p> <p>LFU算法反映了一个key的热度情况，不会因LRU算法的偶尔一次被访问被误认为是热点数据。</p> <p>LFU算法的常见实现方式为链表：</p> <p>新数据放在链表尾部 ，链表中的数据按照被访问次数降序排列，访问次数相同的按最近访问时间降序排列，链表满的时候从链表尾部移出数据。</p> <p><img src="/assets/img/20200707183732233.21b6e77d.png" alt="img"></p> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <p>https://blog.csdn.net/crazymakercircle/article/details/115360829</p> <p>https://blog.csdn.net/weixin_40980639/article/details/125446002</p></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近修改于: </span> <span class="time">2024/6/1 22:34:04</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/Redis/1_Redis缓存三大问题.html" class="prev">
          Redis缓存三大问题
        </a></span> <span class="next"><a href="/Redis/3_BigKey、HotKey 的发现与处理.html">
          BigKey、HotKey 的发现与处理
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#一、redis过期删除策略" class="sidebar-link reco-side-一、redis过期删除策略" data-v-b57cc07c>一、Redis过期删除策略</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#定时删除" class="sidebar-link reco-side-定时删除" data-v-b57cc07c>定时删除</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#定期删除" class="sidebar-link reco-side-定期删除" data-v-b57cc07c>定期删除</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#惰性删除" class="sidebar-link reco-side-惰性删除" data-v-b57cc07c>惰性删除</a></li><li class="level-2" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#二、配置redis内存" class="sidebar-link reco-side-二、配置redis内存" data-v-b57cc07c>二、配置Redis内存</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#通过配置文件修改" class="sidebar-link reco-side-通过配置文件修改" data-v-b57cc07c>通过配置文件修改</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#通过客户端修改" class="sidebar-link reco-side-通过客户端修改" data-v-b57cc07c>通过客户端修改</a></li><li class="level-2" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#三、redis内存淘汰策略" class="sidebar-link reco-side-三、redis内存淘汰策略" data-v-b57cc07c>三、Redis内存淘汰策略</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#八种内存淘汰策略" class="sidebar-link reco-side-八种内存淘汰策略" data-v-b57cc07c>八种内存淘汰策略</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#内存淘汰算法的具体工作原理" class="sidebar-link reco-side-内存淘汰算法的具体工作原理" data-v-b57cc07c>内存淘汰算法的具体工作原理</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#如何设置淘汰策略" class="sidebar-link reco-side-如何设置淘汰策略" data-v-b57cc07c>如何设置淘汰策略</a></li><li class="level-2" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#四、redis-内存淘汰算法" class="sidebar-link reco-side-四、redis-内存淘汰算法" data-v-b57cc07c>四、Redis 内存淘汰算法</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#lru算法" class="sidebar-link reco-side-lru算法" data-v-b57cc07c>LRU算法</a></li><li class="level-3" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#lfu算法" class="sidebar-link reco-side-lfu算法" data-v-b57cc07c>LFU算法</a></li><li class="level-2" data-v-b57cc07c><a href="/Redis/2_%E5%86%85%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AD%96%E7%95%A5.html#参考资料" class="sidebar-link reco-side-参考资料" data-v-b57cc07c>参考资料</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="/bgm/和宇宙温柔的关联 - 房东的猫.m4a" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:200px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="/logo2.png" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(/logo2.png);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>和宇宙温柔的关联</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>房东的猫</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div><!----></div></div>
    <script src="/assets/js/app.72c8e072.js" defer></script><script src="/assets/js/17.ab8859c1.js" defer></script><script src="/assets/js/1.e5894fc2.js" defer></script><script src="/assets/js/57.5ffd788b.js" defer></script><script src="/assets/js/85.1658c68d.js" defer></script>
  </body>
</html>
