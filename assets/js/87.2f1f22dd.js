(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{1098:function(a,s,t){a.exports=t.p+"assets/img/cf05a5a5_1151004.1a119475.png"},1099:function(a,s,t){a.exports=t.p+"assets/img/image-20240711102104024.e9a2e7da.png"},1820:function(a,s,t){"use strict";t.r(s);var e=t(3),n=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("blockquote",[s("p",[a._v("官网：https://skywalking.apache.org")])]),a._v(" "),s("h2",{attrs:{id:"一、简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、简介"}},[a._v("#")]),a._v(" 一、简介")]),a._v(" "),s("ul",[s("li",[a._v("什么是链路追踪")])]),a._v(" "),s("p",[a._v("随着微服务分布式系统变得日趋复杂，越来越多的组件开始走向分布式化，如分布式服务、分布式数据库、分布式缓存等，使得后台服务构成了一种复杂的分布式网络。在服务能力提升的同时，复杂的网络结构也使问题定位更加困难。在一个请求在经过诸多服务过程中，出现了某一个调用失败的情况，查询具体的异常由哪一个服务引起的就变得十分抓狂，问题定位和处理效率是也会非常低。")]),a._v(" "),s("p",[a._v("分布式链路追踪就是将一次分布式请求还原成调用链路，将一次分布式请求的调用情况集中展示，比如各个服务节点上的耗时、请求具体到达哪台机器上、每个服务节点的请求状态等等。")]),a._v(" "),s("ul",[s("li",[a._v("为什么要使用链路追踪")])]),a._v(" "),s("p",[a._v("链路追踪为分布式应用的开发者提供了完整的调用链路还原、调用请求量统计、链路拓扑、应用依赖分析等工具，可以帮助开发者快速分析和诊断分布式应用架构下的性能瓶颈，提高微服务时代下的开发诊断效率。")]),a._v(" "),s("ul",[s("li",[a._v("skywalking 链路追踪")])]),a._v(" "),s("p",[s("code",[a._v("SkyWalking")]),a._v("是一个可观测性分析平台（Observability Analysis Platform 简称OAP）和应用性能管理系统（Application Performance Management 简称 APM）。")]),a._v(" "),s("p",[a._v("提供分布式链路追踪，服务网格（Service Mesh）遥测分析，度量（Metric）聚合和可视化一体化解决方案。")]),a._v(" "),s("p",[a._v("SkyWalking 特点")]),a._v(" "),s("ul",[s("li",[a._v("多语言自动探针，java，.Net Code ,Node.Js")]),a._v(" "),s("li",[a._v("多监控手段，语言探针和Service Mesh")]),a._v(" "),s("li",[a._v("轻量高效，不需要额外搭建大数据平台")]),a._v(" "),s("li",[a._v("模块化架构，UI ，存储《集群管理多种机制可选")]),a._v(" "),s("li",[a._v("支持警告")]),a._v(" "),s("li",[a._v("优秀的可视化效果。")])]),a._v(" "),s("p",[a._v("下面是"),s("code",[a._v("SkyWalking")]),a._v("的架构图：")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1098),alt:"skywalking"}})]),a._v(" "),s("h2",{attrs:{id:"二、安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、安装"}},[a._v("#")]),a._v(" 二、安装")]),a._v(" "),s("p",[a._v("从地址"),s("code",[a._v("https://archive.apache.org/dist/skywalking/")])]),a._v(" "),s("p",[a._v("或skywalking的官网"),s("code",[a._v("http://skywalking.apache.org/downloads")])]),a._v(" "),s("p",[a._v("下载包，包的结构如下：")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("skywalking\n|-- agent     本地代理模块（探针）\n|-- bin       收集启动脚本\n|-- config    skywalking数据收集器配置，告警配置等\n|-- config-examples\n|-- LICENSE\n|-- licenses\n|-- NOTICE\n|-- oap-libs\n|-- README.txt\n|-- tools\n|-- webapp    数据展示UI服务，系统依赖展示，链路追踪\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("h3",{attrs:{id:"windows平台安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#windows平台安装"}},[a._v("#")]),a._v(" Windows平台安装")]),a._v(" "),s("p",[a._v("可以从下载地址下载"),s("code",[a._v("apache-skywalking-apm-$version.tar.gz")]),a._v("包。")]),a._v(" "),s("p",[a._v("Windows下载解压后（.tar.gz），直接点击"),s("code",[a._v("bin/startup.bat")]),a._v("就可以了，这个时候实际上是启动了两个项目，一个收集器，一个web页面。")]),a._v(" "),s("h3",{attrs:{id:"linux平台安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linux平台安装"}},[a._v("#")]),a._v(" Linux平台安装")]),a._v(" "),s("h4",{attrs:{id:"下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[a._v("#")]),a._v(" 下载")]),a._v(" "),s("p",[a._v("如果数据是存储在elasticsearch，需要下载对应的版本，否则启动报错")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://archive.apache.org/dist/skywalking/8.7.0/apache-skywalking-apm-es7-8.7.0.tar.gz\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-xzvf")]),a._v(" apache-skywalking-apm-es7-8.7.0.tar.gz\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("修改配置")]),a._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" apache-skywalking-apm-bin-es7/config\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" application.yml\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("修改存储类型")]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("storage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("selector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SW_STORAGE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("elasticsearch7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("修改elasticsearch配置")]),a._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("elasticsearch7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("clusterNodes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SW_STORAGE_ES_CLUSTER_NODES"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#es7机器地址")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#略，其他配置不用动")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("user")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SW_ES_USER"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"es账号"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#如果es开启认证，需要填账号密码，否则不动即可")]),a._v("\n   "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("SW_ES_PASSWORD"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"es密码"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#如果es开启认证，需要填账号密码，否则不动不动即可")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("h4",{attrs:{id:"启动收集器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动收集器"}},[a._v("#")]),a._v(" 启动收集器")]),a._v(" "),s("p",[s("code",[a._v("skywalking")]),a._v("提供了一个可视化的监控平台.")]),a._v(" "),s("p",[a._v("启动skywalking收集器服务，启动脚本为"),s("code",[a._v("bin")]),a._v("目录下"),s("code",[a._v("startup.sh")]),a._v(".")]),a._v(" "),s("p",[a._v("webapp相关配置修改在"),s("code",[a._v("webapp")]),a._v("目录下"),s("code",[a._v("webapp.yml")]),a._v(".")]),a._v(" "),s("p",[a._v("安装好之后，在浏览器中访问默认地址：http://IP:8080 就可以访问了。")]),a._v(" "),s("p",[s("img",{attrs:{src:t(1099),alt:"image-20240711102104024"}})]),a._v(" "),s("h4",{attrs:{id:"启动项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动项目"}},[a._v("#")]),a._v(" 启动项目")]),a._v(" "),s("p",[a._v("拷贝agent目录到所需位置，探针包含整个目录，不要改变目录结构，可修改"),s("code",[a._v("agent/config/agent.config")]),a._v("配置"),s("code",[a._v("agent.service_name=xxl-job")]),a._v("为自己的应用名，增加JVM启动参数"),s("code",[a._v("-javaagent:/.../skywalking-agent/skywalking-agent.jar")]),a._v("。参数值为skywalking-agent.jar的绝对路径")]),a._v(" "),s("h3",{attrs:{id:"docker安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[a._v("#")]),a._v(" Docker安装")]),a._v(" "),s("p",[a._v("https://zhuanlan.zhihu.com/p/479291356")]),a._v(" "),s("h2",{attrs:{id:"三、使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、使用"}},[a._v("#")]),a._v(" 三、使用")]),a._v(" "),s("p",[a._v("复制安装包目录中的agent目录到java程序所在的机器上，探针包含整个目录，不要改变目录结构，可修改"),s("code",[a._v("agent/config/agent.config")]),a._v("配置"),s("code",[a._v("agent.service_name=xxl-job")]),a._v("为自己的应用名，增加JVM启动参数")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("-javaagent:/skywalking-agent.jar的绝对路径/skywalking-agent.jar "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dskywalking.agent.service_name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("服务名 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dskywalking.collector.backend_service")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("上边安装的服务器ip:11800 \n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("例如")]),a._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("java")]),a._v(" -javaagent:/data/apache-skywalking-apm-bin-es7/agent/skywalking-agent.jar "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dskywalking.agent.namespace")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dev "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dskywalking.agent.service_name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("service-gateway "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dskywalking.collector.backend_service")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("127.0")]),a._v(".0.1:11800 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-Dspring.profiles.active")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("dev "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-jar")]),a._v(" /demo.jar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("参考资料：")]),a._v(" "),s("p",[a._v("[1]. https://blog.csdn.net/chengqwertyuiop/article/details/125065633")]),a._v(" "),s("p",[a._v("[2]. http://doc.ruoyi.vip/ruoyi-cloud/cloud/skywalking.html")]),a._v(" "),s("p",[a._v("agent：https://zhuanlan.zhihu.com/p/483352555")]),a._v(" "),s("p",[a._v("简介：https://blog.csdn.net/feiying0canglang/article/details/120319399")]),a._v(" "),s("p",[a._v("https://www.cnblogs.com/swave/p/11347711.html")]),a._v(" "),s("p",[a._v("https://juejin.cn/post/7379416139975589951?searchId=20240711111734E120A0E1DA0C45950289#heading-3")]),a._v(" "),s("p",[a._v("https://juejin.cn/post/7330828921100861478?searchId=20240711111734E120A0E1DA0C45950289#heading-8")])])}),[],!1,null,null,null);s.default=n.exports}}]);