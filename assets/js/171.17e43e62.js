(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{1815:function(e,n,t){"use strict";t.r(n);var s=t(3),a=Object(s.a)({},(function(){var e=this,n=e._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p",[e._v("一、什么是延时队列")]),e._v(" "),n("p",[e._v("三、RabbitMQ中的TTL")]),e._v(" "),n("p",[e._v("https://cloud.tencent.com/developer/article/1659393")]),e._v(" "),n("p",[e._v("https://blog.csdn.net/Mou_O/article/details/106093749")]),e._v(" "),n("p",[e._v("https://www.cnblogs.com/chengxy-nds/p/13217828.html")]),e._v(" "),n("p",[e._v("深入浅出RabbitMQ：顺序消费、死信队列和延时队列：https://cloud.tencent.com/developer/article/2355643：")]),e._v(" "),n("h2",{attrs:{id:"报错"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#报错"}},[e._v("#")]),e._v(" 报错")]),e._v(" "),n("p",[e._v("Caused by: com.rabbitmq.client.ShutdownSignalException: connection error; protocol method: #method<connection.close>(reply-code=530, reply-text=NOT_ALLOWED - vhost my-rabbit not found, class-id=10, method-id=40)")]),e._v(" "),n("p",[e._v("https://blog.csdn.net/m0_46114643/article/details/122543014")]),e._v(" "),n("p",[e._v("确认消息报错：Channel shutdown: channel error; protocol method")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('@RabbitListener(queues = DELAYED_QUEUE_NAME)\npublic void receiveD(Message message, Channel channel) throws IOException {\n    String msg = new String(message.getBody());\n    log.info("当前时间：{},延时队列收到消息：{}", new Date().toString(), msg);\n    channel.basicAck(message.getMessageProperties().getDeliveryTag(), false);\n}\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br")])]),n("p",[e._v("https://blog.csdn.net/hantanxin/article/details/103871321")]),e._v(" "),n("p",[e._v("修改配置为手动签收")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("    listener:\n      simple:\n        concurrency: 1\n        max-concurrency: 1\n        acknowledge-mode: manual\n        prefetch: 1 \n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br")])])])}),[],!1,null,null,null);n.default=a.exports}}]);